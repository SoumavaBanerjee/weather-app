window.addEventListener("load",()=>{let lon,lat,locationtimezone=document.querySelector(".location-Timezone"),temperaturdegree=document.querySelector(".temperature-deg"),temperaturedescription=document.querySelector(".temperature-des"),degree=document.querySelector(".degree"),degspan=document.querySelector(".degree span"),tempeicon=document.querySelector(".tempicon");degree.addEventListener("click",()=>{const tem=temperaturdegree.innerHTML;console.log(tem),"°C"===degspan.textContent?(degspan.textContent="°F",temperaturdegree.textContent=Math.round(1.8*tem+32)):(degspan.textContent="°C",temperaturdegree.textContent=Math.round(5/9*(tem-32)))}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(position=>{lon=position.coords.longitude,lat=position.coords.latitude;const api=`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=b9e6c3d8ea64ec4fdd403b43c3e95ae4`;fetch(api).then(response=>response.json()).then(data=>{console.log(data);const{name:name}=data,{feels_like:feels_like}=data.main,{id:id,icon:icon,main:main}=data.weather[0];locationtimezone.textContent=name,temperaturdegree.textContent=Math.round(feels_like-273),temperaturedescription.textContent=main,document.body.style.backgroundImage=`url('https://source.unsplash.com/1600x900/?${main}')`,tempeicon.src=id<250?"./animated/thunder.svg":id<350?"./animated/rainy-4.svg":id<510&&"10d"===icon?"./animated/10d.png":id<510&&"10n"===icon?"./animated/10n.png":511===id?"./animated/snowy-5.svg":id<550?"./animated/rainy-4.svg":id<650?"./animated/snowy-6.svg":id<800&&"50n"===icon?"./animated/50n.png":id<800&&"50d"===icon?"./animated/50d.png":id>800&&"02d"===icon?"./animated/cloudy-day-2.svg":id>800&&"02n"===icon?"./animated/cloudy-night-2.svg":id>=803?"./animated/cloudy.svg":800==id&&"01d"===icon?"./animated/day.svg":"./animated/night.svg"})})});let button=document.querySelector(".subbutton"),input=document.querySelector(".searchbar");button.addEventListener("click",(function(){let locationtimezone=document.querySelector(".location-Timezone"),temperaturdegree1=document.querySelector(".temperature-deg"),temperaturedescription=document.querySelector(".temperature-des"),degree1=document.querySelector(".degree"),degspan1=document.querySelector(".degree span"),tempeicon=document.querySelector(".tempicon");fetch("https://api.openweathermap.org/data/2.5/weather?q="+input.value+"&appid=b9e6c3d8ea64ec4fdd403b43c3e95ae4").then(response=>{if(!response.ok)throw new Error("Non 202 response");return response.json()}).then(data=>{console.log(data);const{name:name}=data,{feels_like:feels_like}=data.main,{id:id,icon:icon,main:main}=data.weather[0];console.log(`feels like = ${feels_like}`),locationtimezone.textContent=name,temperaturdegree1.textContent=Math.round(feels_like-273),temperaturedescription.textContent=main,document.body.style.backgroundImage="url('https://source.unsplash.com/1600x900/?"+main+"')",tempeicon.src=id<250?"./animated/thunder.svg":id<350?"./animated/rainy-4.svg":id<510&&"10d"===icon?"./animated/10d.png":id<510&&"10n"===icon?"./animated/10n.png":511===id?"./animated/snowy-5.svg":id<550?"./animated/rainy-4.svg":id<650?"./animated/snowy-6.svg":id<800&&"50n"===icon?"./animated/50n.png":id<800&&"50d"===icon?"./animated/50d.png":id>800&&"02d"===icon?"./animated/cloudy-day-2.svg":id>800&&"02n"===icon?"./animated/cloudy-night-2.svg":id>=803?"./animated/cloudy.svg":800==id&&"01d"===icon?"./animated/day.svg":"./animated/night.svg"}).catch(error=>{Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"Enter a valid city!"}),console.log(error.message)})}));